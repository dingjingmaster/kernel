## 进程/内核模型

内核位进程运行提供环境。因此，内核必须实现一些列服务或接口，以便程序使用这些接口或服务与硬件资源交互。

x86 CPU 有四种运行状态，但是在Unix环境中只使用了两种——内核态、用户态。

当程序在用户态下执行，它不能直接访问内核数据结构或内核程序，然而当程序执行在内核态则无此限制。

当程序请求内核态提供的服务时候，程序必须处于用户态，执行请求后则切换到内核态执行，内核态执行结束后再切会用户态。

CPU提供了用户态和内核态之间相互切换的指令。

进程是动态的实体，通常在操作系统中有有限的生命周期：创建、...、消除。

内核本身不是一个进程，而是一个进程管理器。

进程/内核模型假设进程使用系统调用请求内核提供的功能，当进程请求内核服务时候，通过设置一系列系统调用参数来指定请求的内核服务以及输入参数，然后执行特殊的CPU指令将用户模式切换到系统模式。

除了用户进程外，Unix系统还包含一些称为内核线程的特权进程，它们具有以下特性：
- 在内核地址空间以内核模式运行
- 不与用户交互，因此无须终端设备
- 它们通常在系统运行时候创建，直到系统退出后才会停止执行

## 进程的实现

## 内核可重入特性

## 进程地址空间

每个进程在其私有地址空间中运行，这意味着，进程运行在用户空间时候会拥有自己的私有栈、数据区域、代码区域；当进程运行在内核模式下，进程将处理内核中私有的堆栈、数据段、代码段。

由于内核是可重入的，因此可以依次执行多个内核控制路径（每个路径都与不同的进程相关），在这种情况下每个核控制路径都是私有内核堆栈。

## 同步与关键区域

## 禁用抢占内核

## 禁用中断

## 条件变量

## 自旋锁

## 避免死锁

## 信号与进程间通信

## 进程管理

### 僵尸进程

### 进程组和登录会话


