# 多核调度分析

## 多核调度

SMP是多核处理器最常见的，主要是将一个计算机上集中一组处理器，各处理器是对等及其系统总线和内存子系统。

SMP结构如下图所示：

![](img/m-cpu.png)

根据处理器实际物理属性，CPU可以分为超线程、多核：
- 超线程（SMT）：Linux内核分类CONFIG_SCHED_SMT
- 多核（MC）：Linux内核分类CONFIG_SCHED_MC

## 调度域和调度组

Linux内核把同一个级别的CPU归纳为一个调度组，然后把同一个级别所有调度组归纳为一个调度域。

处理器有一个基本的调度域，它是硬件线程调度域，向上依次是核调度域、处理器调度域和NUMA节点调度域。具体案例分析如下：

![](img/cpu-sched.png)

处理器拓扑结构：NUMA和SMP
- 核（core）：一个处理器包含多个核，每个核有独立的一级缓存，所有核共享二级缓存
- 硬件线程：也可以叫做虚拟处理器（或者叫逻辑处理器），一个处理器或者核包含多个硬件线程，硬件线程共享一级缓存和二级缓存

调度域和调度组：

...

调度域层次，每个调度域包含多个调度组，调度组和调度域关系？
